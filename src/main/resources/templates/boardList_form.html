<!DOCTYPE html>
<html lang="ko" layout:decorate="~{layout}">
<head>
    <!--boardList_ì¹´í…Œê³ ë¦¬_í•„í„°-->
    <!-- AJAX ìš”ì²­ ì²˜ë¦¬e.json()) // ì„œë²„ì—ì„œ ë°›ì€ JSON ë°ì´í„°ë¥¼ ì²˜ë¦¬
            .then(data => { -->
    <script>
        document.getElementById('filterForm').addEventListener('submit', function(event) {
            event.preventDefault(); // ê¸°ë³¸ ì œì¶œ ë™ì‘ì„ ë§‰ìŠµë‹ˆë‹¤.

            var formData = new FormData(this); // í¼ ë°ì´í„° ê°ì²´ ìƒì„±

            // AJAX ìš”ì²­
            fetch('/board/filter', {
                method: 'POST',
                body: formData
            })
            .then(response => respons
                // ë°ì´í„°ë¥¼ ë°›ì•„ì„œ ì²˜ë¦¬í•  ë¶€ë¶„
                console.log('í•„í„°ë§ëœ ê²°ê³¼:', data);
                // ì—¬ê¸°ì— í•„ìš”í•œ DOM ì¡°ì‘ì´ë‚˜ í˜ì´ì§€ ì—…ë°ì´íŠ¸ ë¡œì§ì„ ì¶”ê°€í•˜ì„¸ìš”
            })
            .catch(error => console.error('ì—ëŸ¬ ë°œìƒ:', error));
        });
    </script>
    <script>
        function submitForm() {
            var selectElement = document.getElementById("sort");
            var selectedOption = selectElement.options[selectElement.selectedIndex].value;
            var url = selectedOption === "date" ? "/board/date" : "/board/popular";
            window.location.href = url;
        }
    </script>
    <style>
        .pagination{display:-ms-flexbox;display:flex;padding-left:0;list-style:none;border-radius:.25rem}
        .page-link{position:relative;display:block;padding:.5rem .75rem;margin-left:-1px;line-height:1.25;color:#007bff;background-color:#fff;border:1px solid #dee2e6}
        .page-link:hover{z-index:2;color:#0056b3;text-decoration:none;background-color:#e9ecef;border-color:#dee2e6}
        .page-link:focus{z-index:3;outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.25)}.page-item:first-child
            .page-link{margin-left:0;border-top-left-radius:.25rem;border-bottom-left-radius:.25rem}
            .page-item:last-child .page-link{border-top-right-radius:.25rem;border-bottom-right-radius:.25rem}
            .page-item.active .page-link{z-index:3;color:#fff;background-color:#007bff;border-color:#007bff}
            .page-item.disabled .page-link{color:#6c757d;pointer-events:none;cursor:auto;background-color:#fff;border-color:#dee2e6}
            .pagination-lg .page-link{padding:.75rem 1.5rem;font-size:1.25rem;line-height:1.5}
            .pagination-lg .page-item:first-child .page-link{border-top-left-radius:.3rem;border-bottom-left-radius:.3rem}
            .pagination-lg .page-item:last-child .page-link{border-top-right-radius:.3rem;border-bottom-right-radius:.3rem}
            .pagination-sm .page-link{padding:.25rem .5rem;font-size:.875rem;line-height:1.5}
            .pagination-sm .page-item:first-child .page-link{border-top-left-radius:.2rem;border-bottom-left-radius:.2rem}
            .pagination-sm .page-item:last-child .page-link{border-top-right-radius:.2rem;border-bottom-right-radius:.2rem}
            .badge{display:inline-block;padding:.25em .4em;font-size:75%;font-weight:700;line-height:1;text-align:center;white-space:nowrap;vertical-align:baseline;border-radius:.25rem;transition:color .15s ease-in-out,background-color .15s ease-in-out,border-color .15s ease-in-out,box-shadow .15s ease-in-out}
            @media (prefers-reduced-motion:reduce){.badge{transition:none}}
            a.badge:focus,a.badge:hover{text-decoration:none}
            .badge:empty{display:none}
            .btn .badge{position:relative;top:-1px}
            .badge-pill{padding-right:.6em;padding-left:.6em;border-radius:10rem}
            .badge-primary{color:#fff;background-color:#007bff}
            a.badge-primary:focus,a.badge-primary:hover{color:#fff;background-color:#0062cc}
            a.badge-primary.focus,a.badge-primary:focus{outline:0;box-shadow:0 0 0 .2rem rgba(0,123,255,.5)}
            .badge-secondary{color:#fff;background-color:#6c757d}
            a.badge-secondary:focus,a.badge-secondary:hover{color:#fff;background-color:#545b62}
            a.badge-secondary.focus,a.badge-secondary:focus{outline:0;box-shadow:0 0 0 .2rem rgba(108,117,125,.5)}
            .badge-success{color:#fff;background-color:#28a745}
            a.badge-success:focus,a.badge-success:hover{color:#fff;background-color:#1e7e34}
            a.badge-success.focus,a.badge-success:focus{outline:0;box-shadow:0 0 0 .2rem rgba(40,167,69,.5)}
            .badge-info{color:#fff;background-color:#17a2b8}
            a.badge-info:focus,a.badge-info:hover{color:#fff;background-color:#117a8b}
            a.badge-info.focus,a.badge-info:focus{outline:0;box-shadow:0 0 0 .2rem rgba(23,162,184,.5)}
            .badge-warning{color:#212529;background-color:#ffc107}
            a.badge-warning:focus,a.badge-warning:hover{color:#212529;background-color:#d39e00}
            a.badge-warning.focus,a.badge-warning:focus{outline:0;box-shadow:0 0 0 .2rem rgba(255,193,7,.5)}
            .badge-danger{color:#fff;background-color:#dc3545}
            a.badge-danger:focus,a.badge-danger:hover{color:#fff;background-color:#bd2130}
            a.badge-danger.focus,a.badge-danger:focus{outline:0;box-shadow:0 0 0 .2rem rgba(220,53,69,.5)}
            .badge-light{color:#212529;background-color:#f8f9fa}
            a.badge-light:focus,a.badge-light:hover{color:#212529;background-color:#dae0e5}
            a.badge-light.focus,a.badge-light:focus{outline:0;box-shadow:0 0 0 .2rem rgba(248,249,250,.5)}
            .badge-dark{color:#fff;background-color:#343a40}
            a.badge-dark:focus,a.badge-dark:hover{color:#fff;background-color:#1d2124}
            a.badge-dark.focus,a.badge-dark:focus{outline:0;box-shadow:0 0 0 .2rem rgba(52,58,64,.5)}
            .jumbotron{padding:2rem 1rem;margin-bottom:2rem;background-color:#e9ecef;border-radius:.3rem}
            @media (min-width:576px){.jumbotron{padding:4rem 2rem}}}
        .pagination-wrapper {
        display: flex;
        justify-content: center;
        margin-bottom: 100px;
    }
    .pagination {
        display: flex;
        justify-content: center;
        margin-bottom: 100px;
    }
    </style>
</head>
<body>
<div layout:fragment="content">
    <div class="filter-container">
        <div class="collapse bg-base-200">
            <input type="checkbox" />
            <div class="collapse-title text-xl font-medium">
                <img class="category" src="/img/filter.png" style="width:25px;height:25px;" onclick="toggleCategory()">
            </div>
            <form class="collapse-content">
                <div class="category">
                    <span onclick="toggleCategory('location')"><b>ì§€ì—­</b></span><br>
                    <label><input type="checkbox" value="ì„œìš¸"> ì„œìš¸</label>
                    <label><input type="checkbox" value="ê²½ê¸°"> ê²½ê¸°</label>
                    <label><input type="checkbox" value="ì¶©ë¶"> ì¶©ë¶</label>
                    <label><input type="checkbox" value="ì¶©ë‚¨"> ì¶©ë‚¨</label>
                    <label><input type="checkbox" value="ì „ë¶"> ì „ë¶</label>
                    <label><input type="checkbox" value="ì „ë‚¨"> ì „ë‚¨</label>
                    <label><input type="checkbox" value="ê²½ë‚¨"> ê²½ë‚¨</label>
                    <label><input type="checkbox" value="ê²½ë¶"> ê²½ë¶</label>
                    <label><input type="checkbox" value="ê°•ì›"> ê°•ì›</label>
                    <label><input type="checkbox" value="ì¸ì²œ"> ì¸ì²œ</label>
                    <label><input type="checkbox" value="ëŒ€êµ¬"> ëŒ€êµ¬</label>
                    <label><input type="checkbox" value="ë¶€ì‚°"> ë¶€ì‚°</label>
                    <label><input type="checkbox" value="ìš¸ì‚°"> ìš¸ì‚°</label>
                    <label><input type="checkbox" value="ëŒ€ì „"> ëŒ€ì „</label>
                    <label><input type="checkbox" value="ê´‘ì£¼"> ê´‘ì£¼</label>
                    <label><input type="checkbox" value="ì œì£¼"> ì œì£¼</label>
                </div>

                <hr>

                <div class="category">
                    <span onclick="toggleCategory('food')"><b>ìŒì‹</b></span><br>
                    <label><input type="checkbox" value="í•œì‹"> í•œì‹</label>
                    <label><input type="checkbox" value="ì¤‘ì‹"> ì¤‘ì‹</label>
                    <label><input type="checkbox" value="ì¼ì‹"> ì¼ì‹</label>
                    <label><input type="checkbox" value="ì•„ì‹œì•„"> ì•„ì‹œì•„</label>
                    <label><input type="checkbox" value="ì–‘ì‹"> ì–‘ì‹</label>
                    <label><input type="checkbox" value="ë””ì €íŠ¸"> ë””ì €íŠ¸</label>
                </div>

                <hr>

                <div class="category">
                    <span onclick="toggleCategory('gender')"><b>ì„±ë³„</b></span><br>
                    <label><input type="checkbox" value="ì—¬"> ì—¬</label>
                    <label><input type="checkbox" value="ë‚¨"> ë‚¨</label>
                    <label><input type="checkbox" value="ë¬´ê´€"> ë¬´ê´€</label>
                </div>
                <div class="submit-container">
                    <input type="submit" class="btn" value="ì ìš©">
                </div>
            </form>
        </div>
    </div>

    <form id="sortForm" onchange="submitForm()">
        <label for="sort">ì •ë ¬:</label>
        <select id="sort" name="sort">
            <option value="date" th:selected="${sort == 'date'}">ìµœì‹ ìˆœ</option>
            <option value="popular" th:selected="${sort == 'popular'}">ì¸ê¸°ìˆœ</option>
        </select>
    </form>

    <div class="post-container">
        <th:block th:each="board : ${boards}">
            <a class="post" th:href="@{|/board/${board.id}|}">
                <div th:if="${!#lists.isEmpty(board.images)}">
                    <img th:src="${board.images[0].url}" alt="ìŒì‹ì‚¬ì§„" style="width:200px; height:100%;">
                </div>
                <div class="post-content">
                    <div class="post-title" th:text="${board.title}"></div>
                    <div class="post-details">
                        <div th:text="${board.restName}"></div>
                        <div th:text="${board.address}"></div>
                    </div>
                    <div class="post-tags">
<!--                        <span th:each="tag : ${board.tags}" th:text="${tag}"></span>-->
                    </div>
                    <div class="post-footer">
                        <span th:text="'â¤ï¸ ' + ${board.voter.size()}"></span>
                        <span th:text="'ğŸ’¬ ' + ${board.commentList.size()}"></span>
                    </div>
                </div>
            </a>
        </th:block>
    </div>

    <!-- í˜ì´ì§•ì²˜ë¦¬ ì‹œì‘ -->
    <div class="pagination-wrapper" th:if="${!boards.isEmpty()}">
        <ul class="pagination">
            <li class="page-item" th:classappend="${!boards.hasPrevious} ? 'disabled'">
                <a class="page-link"
                   th:href="@{|?page=${boards.number-1}|}">
                    <span>ì´ì „</span>
                </a>
            </li>
            <li th:each="page: ${#numbers.sequence(0, boards.totalPages-1)}"
                th:if="${page >= boards.number-5 and page <= boards.number+5}"
                th:classappend="${page == boards.number} ? 'active'"
                class="page-item">
                <a th:text="${page}" class="page-link" th:href="@{|?page=${page}|}"></a>
            </li>
            <li class="page-item" th:classappend="${!boards.hasNext} ? 'disabled'">
                <a class="page-link" th:href="@{|?page=${boards.number+1}|}">
                    <span>ë‹¤ìŒ</span>
                </a>
            </li>
        </ul>
    </div>
    <!-- í˜ì´ì§•ì²˜ë¦¬ ë -->

</div>
</body>
</html>