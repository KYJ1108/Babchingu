<!DOCTYPE html>
<html lang="ko" layout:decorate="~{layout}">
<head>
    <script>
        function submitForm() {
            var selectElement = document.getElementById("sort");
            var selectedOption = selectElement.options[selectElement.selectedIndex].value;
            var url = selectedOption === "date" ? "/board/date" : "/board/popular";
            window.location.href = url;
        }
    </script>
</head>
<body>
<div layout:fragment="content">
    <div class="filter-container">
        <div class="collapse bg-base-200">
            <input type="checkbox" />
            <div class="collapse-title text-xl font-medium">
                <img class="category" src="/img/filter.png" style="width:25px;height:25px;" onclick="toggleCategory()">
            </div>
            <form class="collapse-content">
                <div class="category">
                    <span onclick="toggleCategory('location')"><b>ÏßÄÏó≠</b></span><br>
                    <label><input type="checkbox" value="ÏÑúÏö∏"> ÏÑúÏö∏</label>
                    <label><input type="checkbox" value="Í≤ΩÍ∏∞"> Í≤ΩÍ∏∞</label>
                    <label><input type="checkbox" value="Ï∂©Î∂Å"> Ï∂©Î∂Å</label>
                    <label><input type="checkbox" value="Ï∂©ÎÇ®"> Ï∂©ÎÇ®</label>
                    <label><input type="checkbox" value="Ï†ÑÎ∂Å"> Ï†ÑÎ∂Å</label>
                    <label><input type="checkbox" value="Ï†ÑÎÇ®"> Ï†ÑÎÇ®</label>
                    <label><input type="checkbox" value="Í≤ΩÎÇ®"> Í≤ΩÎÇ®</label>
                    <label><input type="checkbox" value="Í≤ΩÎ∂Å"> Í≤ΩÎ∂Å</label>
                    <label><input type="checkbox" value="Í∞ïÏõê"> Í∞ïÏõê</label>
                    <label><input type="checkbox" value="Ïù∏Ï≤ú"> Ïù∏Ï≤ú</label>
                    <label><input type="checkbox" value="ÎåÄÍµ¨"> ÎåÄÍµ¨</label>
                    <label><input type="checkbox" value="Î∂ÄÏÇ∞"> Î∂ÄÏÇ∞</label>
                    <label><input type="checkbox" value="Ïö∏ÏÇ∞"> Ïö∏ÏÇ∞</label>
                    <label><input type="checkbox" value="ÎåÄÏ†Ñ"> ÎåÄÏ†Ñ</label>
                    <label><input type="checkbox" value="Í¥ëÏ£º"> Í¥ëÏ£º</label>
                    <label><input type="checkbox" value="Ï†úÏ£º"> Ï†úÏ£º</label>
                </div>

                <hr>

                <div class="category">
                    <span onclick="toggleCategory('food')"><b>ÏùåÏãù</b></span><br>
                    <label><input type="checkbox" value="ÌïúÏãù"> ÌïúÏãù</label>
                    <label><input type="checkbox" value="Ï§ëÏãù"> Ï§ëÏãù</label>
                    <label><input type="checkbox" value="ÏùºÏãù"> ÏùºÏãù</label>
                    <label><input type="checkbox" value="ÏïÑÏãúÏïÑ"> ÏïÑÏãúÏïÑ</label>
                    <label><input type="checkbox" value="ÏñëÏãù"> ÏñëÏãù</label>
                    <label><input type="checkbox" value="ÎîîÏ†ÄÌä∏"> ÎîîÏ†ÄÌä∏</label>
                </div>

                <hr>

                <div class="category">
                    <span onclick="toggleCategory('gender')"><b>ÏÑ±Î≥Ñ</b></span><br>
                    <label><input type="checkbox" value="Ïó¨"> Ïó¨</label>
                    <label><input type="checkbox" value="ÎÇ®"> ÎÇ®</label>
                    <label><input type="checkbox" value="Î¨¥Í¥Ä"> Î¨¥Í¥Ä</label>
                </div>
                <div class="submit-container">
                    <input type="submit" class="btn" value="Ï†ÅÏö©">
                </div>
            </form>
        </div>
    </div>

    <form id="sortForm" onchange="submitForm()">
        <label for="sort">Ï†ïÎ†¨:</label>
        <select id="sort" name="sort">
            <option value="date" th:selected="${sort == 'date'}">ÏµúÏã†Ïàú</option>
            <option value="popular" th:selected="${sort == 'popular'}">Ïù∏Í∏∞Ïàú</option>
        </select>
    </form>

    <div class="post-container">
        <th:block th:each="board : ${boards}">
            <a class="post" th:href="@{|/board/${board.id}|}">
                <div th:if="${!#lists.isEmpty(board.images)}">
                    <img th:src="${board.images[0].url}" alt="ÏùåÏãùÏÇ¨ÏßÑ" style="width:200px; height:100%;">
                </div>
                <div class="post-content">
                    <div class="post-title" th:text="${board.title}"></div>
                    <div class="post-details">
                        <div th:text="${board.restName}"></div>
                        <div th:text="${board.address}"></div>
                    </div>
                    <div class="post-tags">
                        <!--                        <span th:each="tag : ${board.tags}" th:text="${tag}"></span>-->
                    </div>
                    <div class="post-footer">
                        <span th:text="'‚ù§Ô∏è ' + ${board.voter.size()}"></span>
                        <span th:text="'üí¨ ' + ${board.commentList.size()}"></span>
                    </div>
                </div>
            </a>
        </th:block>
    </div>

    <!-- ÌéòÏù¥ÏßïÏ≤òÎ¶¨ ÏãúÏûë -->
    <div th:if="${!boards.isEmpty()}">
        <ul class="pagination justify-content-center">
            <li class="page-item" th:classappend="${!boards.hasPrevious} ? 'disabled'">
                <a class="page-link"
                   th:href="@{|?page=${boards.number-1}|}">
                    <span>Ïù¥Ï†Ñ</span>
                </a>
            </li>
            <li th:each="page: ${#numbers.sequence(0, boards.totalPages-1)}"
                th:if="${page >= boards.number-5 and page <= boards.number+5}"
                th:classappend="${page == boards.number} ? 'active'"
                class="page-item">
                <a th:text="${page}" class="page-link" th:href="@{|?page=${page}|}"></a>
            </li>
            <li class="page-item" th:classappend="${!boards.hasNext} ? 'disabled'">
                <a class="page-link" th:href="@{|?page=${boards.number+1}|}">
                    <span>Îã§Ïùå</span>
                </a>
            </li>
        </ul>
    </div>
    <!-- ÌéòÏù¥ÏßïÏ≤òÎ¶¨ ÎÅù -->

</div>
</body>
</html>